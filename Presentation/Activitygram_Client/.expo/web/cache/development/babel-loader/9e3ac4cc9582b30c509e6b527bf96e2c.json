{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport Storage from '@react-native-async-storage/async-storage';\nimport { USERS, FOLLOWING, TRENDING, CATEGORIES, ARTICLES } from \"../constants/mocks\";\nimport { light } from \"../constants\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var DataContext = React.createContext({});\nexport var DataProvider = function DataProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isDark = _useState2[0],\n      setIsDark = _useState2[1];\n\n  var _useState3 = useState(light),\n      _useState4 = _slicedToArray(_useState3, 2),\n      theme = _useState4[0],\n      setTheme = _useState4[1];\n\n  var _useState5 = useState(USERS[0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      user = _useState6[0],\n      setUser = _useState6[1];\n\n  var _useState7 = useState(USERS),\n      _useState8 = _slicedToArray(_useState7, 2),\n      users = _useState8[0],\n      setUsers = _useState8[1];\n\n  var _useState9 = useState(FOLLOWING),\n      _useState10 = _slicedToArray(_useState9, 2),\n      following = _useState10[0],\n      setFollowing = _useState10[1];\n\n  var _useState11 = useState(TRENDING),\n      _useState12 = _slicedToArray(_useState11, 2),\n      trending = _useState12[0],\n      setTrending = _useState12[1];\n\n  var _useState13 = useState(CATEGORIES),\n      _useState14 = _slicedToArray(_useState13, 2),\n      categories = _useState14[0],\n      setCategories = _useState14[1];\n\n  var _useState15 = useState(ARTICLES),\n      _useState16 = _slicedToArray(_useState15, 2),\n      articles = _useState16[0],\n      setArticles = _useState16[1];\n\n  var _useState17 = useState({}),\n      _useState18 = _slicedToArray(_useState17, 2),\n      article = _useState18[0],\n      setArticle = _useState18[1];\n\n  var getIsDark = useCallback(function _callee() {\n    var isDarkJSON;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Storage.getItem('isDark'));\n\n          case 2:\n            isDarkJSON = _context.sent;\n\n            if (isDarkJSON !== null) {\n              setIsDark(JSON.parse(isDarkJSON));\n            }\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [setIsDark]);\n  var handleIsDark = useCallback(function (payload) {\n    setIsDark(payload);\n    Storage.setItem('isDark', JSON.stringify(payload));\n  }, [setIsDark]);\n  var handleUsers = useCallback(function (payload) {\n    if (JSON.stringify(payload) !== JSON.stringify(users)) {\n      setUsers(_objectSpread(_objectSpread({}, users), payload));\n    }\n  }, [users, setUsers]);\n  var handleUser = useCallback(function (payload) {\n    if (JSON.stringify(payload) !== JSON.stringify(user)) {\n      setUser(payload);\n    }\n  }, [user, setUser]);\n  var handleArticle = useCallback(function (payload) {\n    if (JSON.stringify(payload) !== JSON.stringify(article)) {\n      setArticle(payload);\n    }\n  }, [article, setArticle]);\n  useEffect(function () {\n    getIsDark();\n  }, [getIsDark]);\n  useEffect(function () {\n    setTheme(isDark ? light : light);\n  }, [isDark]);\n  var contextValue = {\n    isDark: isDark,\n    handleIsDark: handleIsDark,\n    theme: theme,\n    setTheme: setTheme,\n    user: user,\n    users: users,\n    handleUsers: handleUsers,\n    handleUser: handleUser,\n    following: following,\n    setFollowing: setFollowing,\n    trending: trending,\n    setTrending: setTrending,\n    categories: categories,\n    setCategories: setCategories,\n    articles: articles,\n    setArticles: setArticles,\n    article: article,\n    handleArticle: handleArticle\n  };\n  return _jsx(DataContext.Provider, {\n    value: contextValue,\n    children: children\n  });\n};\nexport var useData = function useData() {\n  return useContext(DataContext);\n};","map":{"version":3,"sources":["C:/Users/shirz/Documents/GitHub/Activitygram/Presentation/Activitygram_Client/src/hooks/useData.tsx"],"names":["React","useCallback","useContext","useEffect","useState","Storage","USERS","FOLLOWING","TRENDING","CATEGORIES","ARTICLES","light","DataContext","createContext","DataProvider","children","isDark","setIsDark","theme","setTheme","user","setUser","users","setUsers","following","setFollowing","trending","setTrending","categories","setCategories","articles","setArticles","article","setArticle","getIsDark","getItem","isDarkJSON","JSON","parse","handleIsDark","payload","setItem","stringify","handleUsers","handleUser","handleArticle","contextValue","useData"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAeC,WAAf,EAA4BC,UAA5B,EAAwCC,SAAxC,EAAmDC,QAAnD,QAAkE,OAAlE;AACA,OAAOC,OAAP,MAAoB,2CAApB;AAWA,SACEC,KADF,EAEEC,SAFF,EAGEC,QAHF,EAIEC,UAJF,EAKEC,QALF;AAOA,SAAQC,KAAR;;AAEA,OAAO,IAAMC,WAAW,GAAGZ,KAAK,CAACa,aAAN,CAAoB,EAApB,CAApB;AAEP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAA6C;AAAA,MAA3CC,QAA2C,QAA3CA,QAA2C;;AACvE,kBAA4BX,QAAQ,CAAC,KAAD,CAApC;AAAA;AAAA,MAAOY,MAAP;AAAA,MAAeC,SAAf;;AACA,mBAA0Bb,QAAQ,CAASO,KAAT,CAAlC;AAAA;AAAA,MAAOO,KAAP;AAAA,MAAcC,QAAd;;AACA,mBAAwBf,QAAQ,CAAQE,KAAK,CAAC,CAAD,CAAb,CAAhC;AAAA;AAAA,MAAOc,IAAP;AAAA,MAAaC,OAAb;;AACA,mBAA0BjB,QAAQ,CAAUE,KAAV,CAAlC;AAAA;AAAA,MAAOgB,KAAP;AAAA,MAAcC,QAAd;;AACA,mBAAkCnB,QAAQ,CAAUG,SAAV,CAA1C;AAAA;AAAA,MAAOiB,SAAP;AAAA,MAAkBC,YAAlB;;AACA,oBAAgCrB,QAAQ,CAAUI,QAAV,CAAxC;AAAA;AAAA,MAAOkB,QAAP;AAAA,MAAiBC,WAAjB;;AACA,oBAAoCvB,QAAQ,CAAcK,UAAd,CAA5C;AAAA;AAAA,MAAOmB,UAAP;AAAA,MAAmBC,aAAnB;;AACA,oBAAgCzB,QAAQ,CAAaM,QAAb,CAAxC;AAAA;AAAA,MAAOoB,QAAP;AAAA,MAAiBC,WAAjB;;AACA,oBAA8B3B,QAAQ,CAAW,EAAX,CAAtC;AAAA;AAAA,MAAO4B,OAAP;AAAA,MAAgBC,UAAhB;;AAGA,MAAMC,SAAS,GAAGjC,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEHI,OAAO,CAAC8B,OAAR,CAAgB,QAAhB,CAFG;;AAAA;AAEtBC,YAAAA,UAFsB;;AAI5B,gBAAIA,UAAU,KAAK,IAAnB,EAAyB;AAEvBnB,cAAAA,SAAS,CAACoB,IAAI,CAACC,KAAL,CAAWF,UAAX,CAAD,CAAT;AACD;;AAP2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,EAQ1B,CAACnB,SAAD,CAR0B,CAA7B;AAWA,MAAMsB,YAAY,GAAGtC,WAAW,CAC9B,UAACuC,OAAD,EAAsB;AAEpBvB,IAAAA,SAAS,CAACuB,OAAD,CAAT;AAEAnC,IAAAA,OAAO,CAACoC,OAAR,CAAgB,QAAhB,EAA0BJ,IAAI,CAACK,SAAL,CAAeF,OAAf,CAA1B;AACD,GAN6B,EAO9B,CAACvB,SAAD,CAP8B,CAAhC;AAWA,MAAM0B,WAAW,GAAG1C,WAAW,CAC7B,UAACuC,OAAD,EAAsB;AAEpB,QAAIH,IAAI,CAACK,SAAL,CAAeF,OAAf,MAA4BH,IAAI,CAACK,SAAL,CAAepB,KAAf,CAAhC,EAAuD;AACrDC,MAAAA,QAAQ,iCAAKD,KAAL,GAAekB,OAAf,EAAR;AACD;AACF,GAN4B,EAO7B,CAAClB,KAAD,EAAQC,QAAR,CAP6B,CAA/B;AAWA,MAAMqB,UAAU,GAAG3C,WAAW,CAC5B,UAACuC,OAAD,EAAoB;AAElB,QAAIH,IAAI,CAACK,SAAL,CAAeF,OAAf,MAA4BH,IAAI,CAACK,SAAL,CAAetB,IAAf,CAAhC,EAAsD;AACpDC,MAAAA,OAAO,CAACmB,OAAD,CAAP;AACD;AACF,GAN2B,EAO5B,CAACpB,IAAD,EAAOC,OAAP,CAP4B,CAA9B;AAWA,MAAMwB,aAAa,GAAG5C,WAAW,CAC/B,UAACuC,OAAD,EAAuB;AAErB,QAAIH,IAAI,CAACK,SAAL,CAAeF,OAAf,MAA4BH,IAAI,CAACK,SAAL,CAAeV,OAAf,CAAhC,EAAyD;AACvDC,MAAAA,UAAU,CAACO,OAAD,CAAV;AACD;AACF,GAN8B,EAO/B,CAACR,OAAD,EAAUC,UAAV,CAP+B,CAAjC;AAWA9B,EAAAA,SAAS,CAAC,YAAM;AACd+B,IAAAA,SAAS;AACV,GAFQ,EAEN,CAACA,SAAD,CAFM,CAAT;AAKA/B,EAAAA,SAAS,CAAC,YAAM;AACdgB,IAAAA,QAAQ,CAACH,MAAM,GAAGL,KAAH,GAAWA,KAAlB,CAAR;AACD,GAFQ,EAEN,CAACK,MAAD,CAFM,CAAT;AAIA,MAAM8B,YAAY,GAAG;AACnB9B,IAAAA,MAAM,EAANA,MADmB;AAEnBuB,IAAAA,YAAY,EAAZA,YAFmB;AAGnBrB,IAAAA,KAAK,EAALA,KAHmB;AAInBC,IAAAA,QAAQ,EAARA,QAJmB;AAKnBC,IAAAA,IAAI,EAAJA,IALmB;AAMnBE,IAAAA,KAAK,EAALA,KANmB;AAOnBqB,IAAAA,WAAW,EAAXA,WAPmB;AAQnBC,IAAAA,UAAU,EAAVA,UARmB;AASnBpB,IAAAA,SAAS,EAATA,SATmB;AAUnBC,IAAAA,YAAY,EAAZA,YAVmB;AAWnBC,IAAAA,QAAQ,EAARA,QAXmB;AAYnBC,IAAAA,WAAW,EAAXA,WAZmB;AAanBC,IAAAA,UAAU,EAAVA,UAbmB;AAcnBC,IAAAA,aAAa,EAAbA,aAdmB;AAenBC,IAAAA,QAAQ,EAARA,QAfmB;AAgBnBC,IAAAA,WAAW,EAAXA,WAhBmB;AAiBnBC,IAAAA,OAAO,EAAPA,OAjBmB;AAkBnBa,IAAAA,aAAa,EAAbA;AAlBmB,GAArB;AAqBA,SACE,KAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEC,YAA7B;AAAA,cAA4C/B;AAA5C,IADF;AAGD,CApGM;AAsGP,OAAO,IAAMgC,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAM7C,UAAU,CAACU,WAAD,CAAhB;AAAA,CAAhB","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from 'react';\r\nimport Storage from '@react-native-async-storage/async-storage';\r\n\r\nimport {\r\n  IBigCard,\r\n  ICategory,\r\n  ICard,\r\n  IUser,\r\n  IUseData,\r\n  ITheme,\r\n} from '../constants/types';\r\n\r\nimport {\r\n  USERS,\r\n  FOLLOWING,\r\n  TRENDING,\r\n  CATEGORIES,\r\n  ARTICLES,\r\n} from '../constants/mocks';\r\nimport {light} from '../constants';\r\n\r\nexport const DataContext = React.createContext({});\r\n\r\nexport const DataProvider = ({children}: {children: React.ReactNode}) => {\r\n  const [isDark, setIsDark] = useState(false);\r\n  const [theme, setTheme] = useState<ITheme>(light);\r\n  const [user, setUser] = useState<IUser>(USERS[0]);\r\n  const [users, setUsers] = useState<IUser[]>(USERS);\r\n  const [following, setFollowing] = useState<ICard[]>(FOLLOWING);\r\n  const [trending, setTrending] = useState<ICard[]>(TRENDING);\r\n  const [categories, setCategories] = useState<ICategory[]>(CATEGORIES);\r\n  const [articles, setArticles] = useState<IBigCard[]>(ARTICLES);\r\n  const [article, setArticle] = useState<IBigCard>({});\r\n\r\n  // get isDark mode from storage\r\n  const getIsDark = useCallback(async () => {\r\n    // get preferance gtom storage\r\n    const isDarkJSON = await Storage.getItem('isDark');\r\n\r\n    if (isDarkJSON !== null) {\r\n      // set isDark / compare if has updated\r\n      setIsDark(JSON.parse(isDarkJSON));\r\n    }\r\n  }, [setIsDark]);\r\n\r\n  // handle isDark mode\r\n  const handleIsDark = useCallback(\r\n    (payload: boolean) => {\r\n      // set isDark / compare if has updated\r\n      setIsDark(payload);\r\n      // save preferance to storage\r\n      Storage.setItem('isDark', JSON.stringify(payload));\r\n    },\r\n    [setIsDark],\r\n  );\r\n\r\n  // handle users / profiles\r\n  const handleUsers = useCallback(\r\n    (payload: IUser[]) => {\r\n      // set users / compare if has updated\r\n      if (JSON.stringify(payload) !== JSON.stringify(users)) {\r\n        setUsers({...users, ...payload});\r\n      }\r\n    },\r\n    [users, setUsers],\r\n  );\r\n\r\n  // handle user\r\n  const handleUser = useCallback(\r\n    (payload: IUser) => {\r\n      // set user / compare if has updated\r\n      if (JSON.stringify(payload) !== JSON.stringify(user)) {\r\n        setUser(payload);\r\n      }\r\n    },\r\n    [user, setUser],\r\n  );\r\n\r\n  // handle Article\r\n  const handleArticle = useCallback(\r\n    (payload: IBigCard) => {\r\n      // set article / compare if has updated\r\n      if (JSON.stringify(payload) !== JSON.stringify(article)) {\r\n        setArticle(payload);\r\n      }\r\n    },\r\n    [article, setArticle],\r\n  );\r\n\r\n  // get initial data for: isDark & language\r\n  useEffect(() => {\r\n    getIsDark();\r\n  }, [getIsDark]);\r\n\r\n  // change theme based on isDark updates\r\n  useEffect(() => {\r\n    setTheme(isDark ? light : light);\r\n  }, [isDark]);\r\n\r\n  const contextValue = {\r\n    isDark,\r\n    handleIsDark,\r\n    theme,\r\n    setTheme,\r\n    user,\r\n    users,\r\n    handleUsers,\r\n    handleUser,\r\n    following,\r\n    setFollowing,\r\n    trending,\r\n    setTrending,\r\n    categories,\r\n    setCategories,\r\n    articles,\r\n    setArticles,\r\n    article,\r\n    handleArticle,\r\n  };\r\n\r\n  return (\r\n    <DataContext.Provider value={contextValue}>{children}</DataContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useData = () => useContext(DataContext) as IUseData;"]},"metadata":{},"sourceType":"module"}